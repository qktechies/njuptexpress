#外卖代理后端接口api

- 接口ip:198.11.179.106

- 接口端口:1337

- 请求格式:application/json

##1. 管理员api

###1.1 登录

* **接口url**

```
POST /adminUser/login
```

* **参数说明**

| 参数 | 类型 | 描述 |
|--------|--------|--------|
|  adminUsername  | String | 管理员用户名 |
|  password  | String | 管理员密码|
|securityId|String|验证码id
|securityAnswer|String|验证码内容

* **返回样例**


|http状态码|错误内容|
|--------|--------|
|400|参数用户名,密码,验证码id,验证码内容不能为空
|500|服务器内部错误|
|409|验证码错误或验证码过期
|404|用户名不存在|
|403|用户尚未激活|
|401|用户密码错误|
|200|登录成功|

###1.2 登出

* **接口url**

```
POST /adminUser/logout
```

* **参数说明**

无参数

* **返回样例**

|http状态码|错误内容|
|--------|--------|
|200|登出成功|

###1.3 注册

* **接口url**

```
POST /adminUser/regist
```

* **参数说明**

| 参数 | 类型 | 描述 |
|--------|--------|--------|
|  adminUsername  | String | 管理员用户名 |
|  password  | String | 管理员密码|
|securityId|String|验证码id
|securityAnswer|String|验证码内容

* **返回样例**

注册成功
```
{
	status: true
}
```

注册失败
```
{
	status: false,
    msg:'注册失败原因'
}
```

###1.4 管理员列表

* **接口url**

```
GET /adminUser
```

* **参数说明**

| 参数 | 类型 | 描述 |
|--------|--------|--------|
| limit|int|管理员个数|
| skip|int|过滤管理员个数|
|sort|string|排序方式|

* **返回样例**

```
[
  {
    "adminUsername": "admin2", //用户名
    "active": false,		  //是否激活
    "createdAt": "2015-04-21T17:20:14.174Z", //创建时间
    "updatedAt": "2015-04-21T17:20:14.174Z", //更新时间安
    "id": "553686ce02b59d0b60f50832" //id
  },
  {
    "adminUsername": "admin",
    "active": true,
    "createdAt": "2015-04-14T19:44:28.127Z",
    "updatedAt": "2015-04-14T19:44:28.127Z",
    "id": "552d6e1c3c1257427d3b07c8"
  }
]
```

###1.5 激活管理员

* **接口url**

```
PUT /adminUser/:id
```

* **参数说明**

| 参数 | 类型 | 描述 |
|--------|--------|--------|
|:id|string|用户id|
|active|int|激活状态0:未激活,1:激活|

* **返回样例**

|http状态码|错误内容|
|--------|--------|
|200|激活成功|
|401|未授权|
|404|被激活的管理员未找到|
|500|服务器内部错误|

激活成功返回json:
```
{
  "adminUsername": "admin2",
  "active": true,
  "createdAt": "2015-04-21T17:20:14.174Z",
  "updatedAt": "2015-04-21T17:20:49.964Z",
  "id": "553686ce02b59d0b60f50832"
}
```

###1.6 删除管理员

* **接口url**

```
DELETE /adminUser/:id
```

* **参数说明**

| 参数 | 类型 | 描述 |
|--------|--------|--------|
|:id|string|用户id|

* **返回样例**

|http状态码|错误内容|
|--------|--------|
|200|删除成功|
|401|未授权|
|404|被删除的管理员未找到|
|500|服务器内部错误|

删除成功返回json:
```
{
  "adminUsername": "admin2",
  "active": true,
  "createdAt": "2015-04-21T17:20:14.174Z",
  "updatedAt": "2015-04-21T17:20:49.964Z",
  "id": "553686ce02b59d0b60f50832"
}
```

###1.7 普通用户列表

* **接口url**

```
GET /user
```

* **参数说明**

| 参数 | 类型 | 描述 |
|--------|--------|--------|
| limit|int|每页用户个数|
| skip|int|跳过用户个数|
|sort|string|排序方式|

* **返回样例**

|http状态码|错误内容|
|--------|--------|
|200|获取成功|
|401|未授权|
|500|服务器内部错误|

获取用户列表成功返回json:
```
[
  {
    "username": "996902001@qq.com",
    "mobile": "13776531050",
    "address": "菊园18栋",
    "createdAt": "2015-04-14T17:37:58.549Z",
    "id": "552d50767a45762478125ba3"
  },
  {
    "username": "996902002@qq.com",
    "mobile": "13776531050",
    "address": "菊园18栋",
    "createdAt": "2015-04-14T17:37:07.338Z",
    "id": "552d50437a45762478125ba2"
  }
]
```

###1.8 更新普通用户

* **接口url**

```
PUT /user
```

* **参数说明**

| 参数 | 类型 | 描述 |
|--------|--------|--------|
| mobile|string|手机号|
| address|int|宿舍地址|
|username|string|用户名|

* **返回样例**

|http状态码|错误内容|
|--------|--------|
|200|更新成功|
|401|未授权|
|404|用户不存在|
|500|服务器内部错误|

更新用户成功返回json:
```
{
  "username": "996902001@qq.com",
  "mobile": "13776531051",
  "address": "菊园18栋",
  "createdAt": "2015-04-14T17:37:58.549Z",
  "id": "552d50767a45762478125ba3"
}
```

###1.9 删除普通用户

* **接口url**

```
DELETE /user/:id
```

* **参数说明**

| 参数 | 类型 | 描述 |
|--------|--------|--------|
|:id|string|用户id|

* **返回样例**

|http状态码|错误内容|
|--------|--------|
|200|删除成功|
|401|未授权|
|404|用户不存在|
|500|服务器内部错误|

更新用户成功返回json:
```
{
  "username": "996902001@qq.com",
  "mobile": "13776531051",
  "address": "菊园18栋",
  "createdAt": "2015-04-14T17:37:58.549Z",
  "id": "552d50767a45762478125ba3"
}
```

###1.10 用户快递列表

* **接口url**

```
GET /memberExpress
```

* **参数说明**

| 参数 | 类型 | 描述 |
|--------|--------|--------|
| limit|int|快递个数|
| skip|int|过滤快递个数|
|sort|string|排序方式|
|username|string|快递用户名|

* **返回样例**

|http状态码|错误内容|
|--------|--------|
|200|获取成功|
|401|未授权|
|500|服务器内部错误|

获取列表成功返回json:
```
[
{
"username": "996902001@qq.com",
"mobile": "13776531050",
"address": "菊园18栋",
"sms": "212121",
"status": 0,
"createdAt": "2015-04-14T19:42:57.671Z",
"updatedAt": "2015-04-14T19:42:57.671Z",
"id": "552d6dc13c1257427d3b07c3"
},
{
"username": "996902001@qq.com",
"mobile": "13776531050",
"address": "菊园18栋",
"sms": "21212121",
"status": 0,
"createdAt": "2015-04-14T19:41:46.211Z",
"updatedAt": "2015-04-14T19:41:46.211Z",
"id": "552d6d7a3c1257427d3b07c2"
}
]
```

###1.11 更新快递状态

* **接口url**

```
PUT /memberExpress/:id
```

* **参数说明**

| 参数 | 类型 | 描述 |
|--------|--------|--------|
|:id|string|快递id|
|status|enum|0:取件中 1:配送中 2:完成

* **返回样例**

|http状态码|错误内容|
|--------|--------|
|200|请求成功|
|401|未授权|
|500|服务器内部错误|

更新列表成功返回json:
```
{
  "username": "996902001@qq.com",
  "mobile": "13776531050",
  "address": "菊园18栋",
  "sms": "212121",
  "status": 2,
  "createdAt": "2015-04-14T19:42:57.671Z",
  "updatedAt": "2015-04-21T17:40:11.424Z",
  "id": "552d6dc13c1257427d3b07c3"
}
```

###1.12 获取验证码

* **接口url**

```
GET /securityCode
```

* **参数说明**

| 参数 | 类型 | 描述 |
|--------|--------|--------|
|width|int|验证码图片宽度|
|height|int|验证码图片高度

* **返回样例**

```
{
"id": "5536945a02b59d0b60f5083a",
"buf": "图片base64"
}
```

##2. 普通用户api

###2.1 登录

* **接口url**

```
POST /user/login
```

* **参数说明**

| 参数 | 类型 | 描述 |
|--------|--------|--------|
|username|string|用户名|
|password|string|密码

* **返回样例**

登录成功:
```
{
  "status": true,
  "result": {
    "username": "996902001@qq.com",
    "mobile": "13776531050",
    "address": "18栋403",
    "createdAt": "2015-04-21T18:07:05.555Z",
    "id": "553691c902b59d0b60f50838"
  }
}
```

登录失败:
```
{
	"status": false,
    "result": "错误信息"
}
```

###2.2 注册

* **接口url**

```
POST /user/regist
```

* **参数说明**

| 参数 | 类型 | 描述 |
|--------|--------|--------|
|username|string|用户名|
|mobile|string|手机号|
|password|string|密码|
|address|string|宿舍地址|

* **返回样例**

注册成功:
```
{
  "status": true,
  "result": {
    "username": "996902004@qq.com",
    "mobile": "13776531050",
    "address": "19栋504",
    "createdAt": "2015-04-21T18:14:17.213Z",
    "id": "5536937902b59d0b60f50839"
  }
}
```

注册失败:
```
{
	"status": false,
    "result": "错误信息"
}
```

###2.3 发布快递

* **接口url**

```
POST /memberExpress/save
```

* **参数说明**

| 参数 | 类型 | 描述 |
|--------|--------|--------|
|username|string|用户名|
|mobile|string|手机号|
|sms|string|快递短信内容|
|address|string|宿舍地址|

* **返回样例**

```
{
  "status": true/false,
  "result": "错误消息"
}
```

















